!function(){"use strict";function a(){}function b(){}angular.module("gjTimerApp",["ui.bootstrap","gjTimer"]),angular.module("gjTimerApp").config(a).run(b)}(),function(){"use strict";angular.module("gjTimer",["cub","menuBar","scramble","results","timer"])}(),function(){"use strict";function a(a,b){var c="#FFFFFF",d="rgba(0, 0 , 0, 0.8)";a.style={body:{},section:{},timer:{}},a.keydown=function(a){b.$broadcast("keydown",a)},a.keyup=function(a){b.$broadcast("keyup",a)},a.$on("timer focus",function(){a.style.body={"background-color":d},a.style.section={display:"none"},a.style.timer={"margin-top":"4.5625em"}}),a.$on("timer unfocus",function(){a.style.body={"background-color":c},a.style.section={display:"block"},a.style.timer={"margin-top":"0"}})}angular.module("gjTimer").controller("gjTimerController",["$scope","$rootScope",a])}(),function(){"use strict";function a(){return function(a){return a.slice().reverse()}}angular.module("gjTimer").filter("reverse",a)}(),function(){"use strict";function a(){var a=this,b={"Rubik's Cube":"333","4x4 Cube":"444","5x5 Cube":"555","2x2 Cube":"222","3x3 blindfolded":"333bf","3x3 one-handed":"333oh","3x3 fewest moves":"333fm","3x3 with feet":"333ft",Megaminx:"minx",Pyraminx:"pyram","Square-1":"sq1","Rubik's Clock":"clock",Skewb:"skewb","6x6 Cube":"666","7x7 Cube":"777","4x4 blindfolded":"444bf","5x5 blindfolded":"555bf","3x3 multi blind":"333mbf"};a.getEvents=function(){return b},a.getEventId=function(a){return b[a]}}angular.module("gjTimer").service("Events",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"/dist/components/gjTimer/cub/cub.html",controller:"CubController",controllerAs:"ctrl",scope:!0}}angular.module("cub",[]).directive("cub",a)}(),function(){"use strict";function a(a,b){}angular.module("cub").controller("CubController",["$rootScope","CubService",a])}(),function(){"use strict";function a(){}angular.module("cub").service("CubService",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"/dist/components/gjTimer/scramble/scramble.html",controller:"ScrambleController",controllerAs:"ctrl",scope:!0}}angular.module("scramble",[]).directive("scramble",a)}(),function(){"use strict";function a(a,b,c,d){var e=this,f=13;a.$on("new scramble",function(a,f){b.scramble=d.newScramble(f),e.scramble=c.trustAsHtml(b.scramble)}),a.$on("keydown",function(a,g){g.keyCode===f&&(b.scramble=d.newScramble(g),e.scramble=c.trustAsHtml(b.scramble))})}angular.module("scramble").controller("ScrambleController",["$scope","$rootScope","$sce","ScrambleService",a])}(),function(){"use strict";function a(a){var b=this;b.getScramble=function(){return b.scramble},b.newScramble=function(c){return b.scramble=scramblers[a.getEventId(c)].getRandomScramble().scramble_string,b.scramble}}angular.module("scramble").service("ScrambleService",["Events",a])}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"/dist/components/gjTimer/menuBar/menuBar.html",controller:"MenuBarController",controllerAs:"ctrl",scope:!0}}angular.module("menuBar",[]).directive("menuBar",a)}(),function(){"use strict";function a(a,b,c,d){var e=this,f=20;e.events=d.getEvents(),e.session=c.init(),e.event=e.session.event,a.sessionId="session"+e.session.name.substr(8,e.session.name.length),a.event=e.event,b(function(){a.$broadcast("new scramble",e.event)},50),e.sessions=[];for(var g=0;f>g;g++)e.sessions[g]={};angular.forEach(e.sessions,function(a,b){a.name="Session "+(b+1)}),e.selectEvent=function(b){e.event=c.changeEvent("session"+e.session.name.substr(8,e.session.name.length),b),a.event=e.event,a.$broadcast("new scramble",e.event)},e.changeSession=function(b){e.session=c.changeSession("session"+b.substr(8,b.length)),a.sessionId="session"+b.substr(8,b.length),a.$broadcast("refresh data"),e.event!==e.session.event&&a.$broadcast("new scramble",e.session.event),e.event=e.session.event,a.event=e.event},e.settings=function(){console.log("settings")},e.scramble=function(){a.$broadcast("new scramble",e.session.event)},e.resetSession=function(){confirm("Are you sure you would like to reset "+e.session.name+"?")&&(e.session=c.resetSession("session"+e.session.name.substr(8,e.session.name.length)),a.$broadcast("refresh data"))}}angular.module("menuBar").controller("MenuBarController",["$rootScope","$timeout","MenuBarService","Events",a])}(),function(){"use strict";function a(){var a=this,b=20;a.init=function(){var c;null!==localStorage.getItem("currentSessionId")?c=localStorage.getItem("currentSessionId"):(c=null!==localStorage.getItem("sessionNumber")?"session"+localStorage.getItem("sessionNumber"):"session1",localStorage.setItem("currentSessionId",c));for(var d={event:"Rubik's Cube",list:[]},e=1;b>=e;e++){var f=JSON.parse(localStorage.getItem("session"+e));null===f?(d.name="Session "+e,localStorage.setItem("session"+e,JSON.stringify(d))):null===f.event&&(f.event="Rubik's Cube",localStorage.setItem("session"+e,JSON.stringify(f)))}return a.getSession(c)},a.getSession=function(a){return JSON.parse(localStorage.getItem(a))},a.changeSession=function(b){return localStorage.setItem("currentSessionId",b),a.getSession(b)},a.resetSession=function(a){var b=JSON.parse(localStorage.getItem(a));return b.list=[],localStorage.setItem(a,JSON.stringify(b)),b},a.changeEvent=function(a,b){var c=JSON.parse(localStorage.getItem(a));return c.event=b,localStorage.setItem(a,JSON.stringify(c)),c.event}}angular.module("menuBar").service("MenuBarService",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"/dist/components/gjTimer/results/results.html",controller:"ResultsController",controllerAs:"ctrl",scope:!0}}angular.module("results",[]).directive("results",a)}(),function(){"use strict";function a(a,b,c){var d=this,e=2;d.results=c.getResults(b.sessionId,e),a.$on("refresh data",function(){d.results=c.getResults(b.sessionId,e)})}angular.module("results").controller("ResultsController",["$scope","$rootScope","ResultsService",a])}(),function(){"use strict";function a(){var a=this;a.getResults=function(b,c){var d=JSON.parse(localStorage.getItem(b)).list;return angular.forEach(d,function(b,e){b.time=Number(b.time).toFixed(c),e>=4?b.avg5=a.calculateAverage(d.slice(e-4,e+1),c):b.avg5="DNF",e>=11?b.avg12=a.calculateAverage(d.slice(e-11,e+1),c):b.avg12="DNF"}),d},a.calculateAverage=function(b,c){if(b.length<3)return"DNF";var d=[],e=2147485547;return angular.forEach(b,function(b){void 0!==b.penalty&&"(DNF)"===b.penalty?d.push(e):void 0!==b.penalty&&"(+2)"===b.penalty?d.push(a.timeToMilliseconds(b.time,c)+2):d.push(a.timeToMilliseconds(b.time,c))}),d.splice(d.indexOf(Math.min.apply(null,d)),1),d.splice(d.indexOf(Math.max.apply(null,d)),1),d.indexOf(e)>=0?"DNF":(d.reduce(function(a,b){return a+b},0)/d.length).toFixed(c)},a.calculateMean=function(b,c){var d=[];return angular.forEach(b,function(b){return void 0!==b.penalty&&"(DNF)"===b.penalty?"DNF":void(void 0!==b.penalty&&"(+2)"===b.penalty?d.push(a.timeToMilliseconds(b.time,c)+2):d.push(a.timeToMilliseconds(b.time,c)))}),(d.reduce(function(a,b){return a+b},0)/d.length).toFixed(c)},a.calculateLargeMean=function(b,c){var d=[];return angular.forEach(b,function(b){void 0!==b.penalty&&"(+2)"===b.penalty?d.push(a.timeToMilliseconds(b.time,c)+2):(void 0===b.penalty||""===b.penalty)&&d.push(a.timeToMilliseconds(b.time,c))}),(d.reduce(function(a,b){return a+b},0)/d.length).toFixed(c)},a.timeToMilliseconds=function(a){var b=a.split(":");return 1===b.length?parseFloat(b[0]):2===b.length?60*parseFloat(b[0])+parseFloat(b[1]):3===b.length?3600*parseFloat(b[0])+60*parseFloat(b[1])+parseFloat(b[2]):-1}}angular.module("results").service("ResultsService",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"/dist/components/gjTimer/timer/timer.html",controller:"TimerController",controllerAs:"ctrl",scope:!0}}angular.module("timer",[]).directive("timer",a)}(),function(){"use strict";function a(a,b,c,d,e){var f,g=this,h="reset",i=50,j=200,k=32;g.time=moment(0).format("s.SSS");var l={BLACK:{color:"#000000"},RED:{color:"#FF0000"},GREEN:{color:"#2EB82E"}};a.$on("keydown",function(a,i){"reset"===h&&i.keyCode===k?(h="keydown",g.time=moment(0).format("s.SSS"),g.timerStyle=l.RED,d(function(){"keydown"===h&&(h="ready",g.timerStyle=l.GREEN,b.$broadcast("timer focus"))},j)):"timing"===h&&(h="stopped",c.cancel(f),b.$broadcast("timer unfocus"),e.saveResult(g.time,b.scramble,b.sessionId),b.$broadcast("refresh data"),b.$broadcast("new scramble",b.event))}),a.$on("keyup",function(a,b){g.timerStyle=l.BLACK,"ready"===h&&b.keyCode===k?(h="timing",e.startTimer(),f=c(function(){g.time=e.getTime()},i)):("stopped"===h||"keydown"===h)&&(h="reset")})}angular.module("timer").controller("TimerController",["$scope","$rootScope","$interval","$timeout","TimerService",a])}(),function(){"use strict";function a(){var a,b=this;b.getTime=function(){var b=moment(Date.now()-a);return 1e4>b?b.format("s.SSS"):6e4>b?b.format("ss.SSS"):6e5>b?b.format("m:ss.SSS"):36e5>b?b.utc().format("h:mm:ss.SSS"):void 0},b.startTimer=function(){a=Date.now()},b.saveResult=function(a,b,c){var d={time:a,scramble:b,date:new Date},e=JSON.parse(localStorage.getItem(c));e.list.push(d),localStorage.setItem(c,JSON.stringify(e))}}angular.module("timer").service("TimerService",a)}();